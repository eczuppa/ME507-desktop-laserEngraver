<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DigitalCarpenter - Lite: serial.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DigitalCarpenter - Lite
   &#160;<span id="projectnumber">Version 0.01</span>
   </div>
   <div id="projectbrief">A Nucleo L476RG based CNC Desktop CoreXY Laser Cutter &amp; Engraver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('serial_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">serial.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="libraries_6constants_8h_source.html">libraries&amp;constants.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for serial.h:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h__incl.png" border="0" usemap="#serial_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h__dep__incl.png" border="0" usemap="#serial_8hdep" alt=""/></div>
<!-- MAP 1 -->
</div>
</div>
<p><a href="serial_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afa0499dcb85922b683da3918f512adb6"><td class="memItemLeft" align="right" valign="top"><a id="afa0499dcb85922b683da3918f512adb6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LINE_BUFFER_SIZE</b>&#160;&#160;&#160;80</td></tr>
<tr class="separator:afa0499dcb85922b683da3918f512adb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a293f5e4fc5aa15a5fd55f7deb8c0a990"><td class="memItemLeft" align="right" valign="top"><a id="a293f5e4fc5aa15a5fd55f7deb8c0a990"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>READ_Q_SIZE</b>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a293f5e4fc5aa15a5fd55f7deb8c0a990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324f37d1d43120656e7861ac4f464b16"><td class="memItemLeft" align="right" valign="top"><a id="a324f37d1d43120656e7861ac4f464b16"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>WRITE_Q_SIZE</b>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a324f37d1d43120656e7861ac4f464b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf711402879d849ee632657927ef9734"><td class="memItemLeft" align="right" valign="top"><a id="acf711402879d849ee632657927ef9734"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PAUSE_Q_LIMIT</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:acf711402879d849ee632657927ef9734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7005426d17b93b9f15097af3f3f0d90"><td class="memItemLeft" align="right" valign="top"><a id="ae7005426d17b93b9f15097af3f3f0d90"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DES_Q_SIZE</b>&#160;&#160;&#160;32</td></tr>
<tr class="separator:ae7005426d17b93b9f15097af3f3f0d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1235d5ce36f7267285e82dccd428aa6"><td class="memItemLeft" align="right" valign="top"><a id="ad1235d5ce36f7267285e82dccd428aa6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>READY</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ad1235d5ce36f7267285e82dccd428aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c3f748f6138bf4509cb4705b347e8a7"><td class="memItemLeft" align="right" valign="top"><a id="a6c3f748f6138bf4509cb4705b347e8a7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>READING</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a6c3f748f6138bf4509cb4705b347e8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eeea263034e2501cb1083a96a53e2d7"><td class="memItemLeft" align="right" valign="top"><a id="a4eeea263034e2501cb1083a96a53e2d7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NOT_READY</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a4eeea263034e2501cb1083a96a53e2d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8e69e07806940f62fe031d0ed54dc7af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a8e69e07806940f62fe031d0ed54dc7af">task_read_serial</a> (void *p_params)</td></tr>
<tr class="memdesc:a8e69e07806940f62fe031d0ed54dc7af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which reads the serial port and puts it in a queue.  <a href="serial_8h.html#a8e69e07806940f62fe031d0ed54dc7af">More...</a><br /></td></tr>
<tr class="separator:a8e69e07806940f62fe031d0ed54dc7af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a899c404f96852d81ce663ccd85a6e67f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a899c404f96852d81ce663ccd85a6e67f">task_print_serial</a> (void *p_params)</td></tr>
<tr class="memdesc:a899c404f96852d81ce663ccd85a6e67f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which prints any string that is sent to the chars_to_print queue.  <a href="serial_8h.html#a899c404f96852d81ce663ccd85a6e67f">More...</a><br /></td></tr>
<tr class="separator:a899c404f96852d81ce663ccd85a6e67f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c4a3b44bf36aa9af8782bc12ef085bb"><td class="memItemLeft" align="right" valign="top"><a id="a6c4a3b44bf36aa9af8782bc12ef085bb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_serial</b> (String string_to_print)</td></tr>
<tr class="separator:a6c4a3b44bf36aa9af8782bc12ef085bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1d7dd7e7cedb31a0840e8d1360f1df"><td class="memItemLeft" align="right" valign="top"><a id="adb1d7dd7e7cedb31a0840e8d1360f1df"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_serial</b> (float printed_float)</td></tr>
<tr class="separator:adb1d7dd7e7cedb31a0840e8d1360f1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b70c1422033d4ffbc5bdd688e21ff6"><td class="memItemLeft" align="right" valign="top"><a id="a46b70c1422033d4ffbc5bdd688e21ff6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_serial</b> (uint8_t printed_int)</td></tr>
<tr class="separator:a46b70c1422033d4ffbc5bdd688e21ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0938d040bad68dea233e37e90ca0540"><td class="memItemLeft" align="right" valign="top"><a id="aa0938d040bad68dea233e37e90ca0540"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_serial</b> (char *printed_char)</td></tr>
<tr class="separator:aa0938d040bad68dea233e37e90ca0540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5712b45b332237de4d3ff4fe55a7ae"><td class="memItemLeft" align="right" valign="top"><a id="aad5712b45b332237de4d3ff4fe55a7ae"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_serial</b> (char printed_char)</td></tr>
<tr class="separator:aad5712b45b332237de4d3ff4fe55a7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8c4da1a26dcdbdb84bfe33ab2c3ac3"><td class="memItemLeft" align="right" valign="top"><a id="a4e8c4da1a26dcdbdb84bfe33ab2c3ac3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_serial</b> (const char *printed_char)</td></tr>
<tr class="separator:a4e8c4da1a26dcdbdb84bfe33ab2c3ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e2559905ce06de071389dfb6ea3b97"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a83e2559905ce06de071389dfb6ea3b97">parseIntWithEcho</a> (Stream &amp;stream)</td></tr>
<tr class="memdesc:a83e2559905ce06de071389dfb6ea3b97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an integer from a serial device, echoing input and blocking.  <a href="serial_8h.html#a83e2559905ce06de071389dfb6ea3b97">More...</a><br /></td></tr>
<tr class="separator:a83e2559905ce06de071389dfb6ea3b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeca539d059d1b76b873ccdadf74ca23d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#aeca539d059d1b76b873ccdadf74ca23d">task_ui</a> (void *p_params)</td></tr>
<tr class="memdesc:aeca539d059d1b76b873ccdadf74ca23d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which interacts with a user.  <a href="serial_8h.html#aeca539d059d1b76b873ccdadf74ca23d">More...</a><br /></td></tr>
<tr class="separator:aeca539d059d1b76b873ccdadf74ca23d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab29b8e3b99952be6f42e0470b5caa4ac"><td class="memItemLeft" align="right" valign="top"><a id="ab29b8e3b99952be6f42e0470b5caa4ac"></a>
const TickType_t&#160;</td><td class="memItemRight" valign="bottom"><b>UI_period</b> = 100</td></tr>
<tr class="separator:ab29b8e3b99952be6f42e0470b5caa4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the header for the file containing functions that allow for communication through the serial port.</p>
<p>The full Doxygen header for each of the functions is in the .cpp file, so there is just a brief description of the functions here.</p>
<dl class="section author"><dt>Author</dt><dd>Niko Banks </dd>
<dd>
Ethan Czuppa </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Nov 10 2020 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a83e2559905ce06de071389dfb6ea3b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83e2559905ce06de071389dfb6ea3b97">&#9670;&nbsp;</a></span>parseIntWithEcho()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t parseIntWithEcho </td>
          <td>(</td>
          <td class="paramtype">Stream &amp;&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an integer from a serial device, echoing input and blocking. </p>
<p>This function reads an integer which is typed by a user into a serial device. It uses the Arduino function <code>readBytes()</code>, which blocks the task which calls this function until a character is read. When any character is received, it is echoed through the serial port so the user can see what was typed. Only decimal integers are supported; negative integers beginning with a single <code>-</code> sign or positive ones with a <code>+</code> will work.</p>
<p><b>NOTE:</b> The serial device must have its timeout set to a very long time, or this function will malfunction. A recommended call: </p><div class="fragment"><div class="line">Serial.setTimeout (0xFFFFFFFF);</div>
</div><!-- fragment --><p> Assuming that the serial port named <code>Serial</code> is being used.</p>
<p><b>NOTE:</b> This function is only used for testing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The serial device such as <code>Serial</code> used to communicate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a899c404f96852d81ce663ccd85a6e67f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a899c404f96852d81ce663ccd85a6e67f">&#9670;&nbsp;</a></span>task_print_serial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_print_serial </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which prints any string that is sent to the chars_to_print queue. </p>
<p>This task reads checks if there is anything in the chars_to_print queue, and if there is something, it prints it to the serial port. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>A pointer to function parameters which we don't use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8e69e07806940f62fe031d0ed54dc7af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e69e07806940f62fe031d0ed54dc7af">&#9670;&nbsp;</a></span>task_read_serial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_read_serial </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which reads the serial port and puts it in a queue. </p>
<p>This task reads an input into the serial port (from the python UI script presumably) and reads it. The task has 3 main states, which are READY, READING, and NOT_READY. The task will remain in READY initially until it is asked "Ready?" through the serial port, in which case it will transition to READING to read the data and put it into the read_chars queue. If the read_chars queue is full, the task will go to the NOT_READY state until space has been cleared. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>A pointer to function parameters which we don't use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeca539d059d1b76b873ccdadf74ca23d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeca539d059d1b76b873ccdadf74ca23d">&#9670;&nbsp;</a></span>task_ui()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_ui </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which interacts with a user. </p>
<p>This task demonstrates how to use a FreeRTOS task for interacting with some user while other more important things are going on. <b>NOTE:</b> This function is only used for testing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>A pointer to function parameters which we don't use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="serial_8h.html">serial.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
