<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DigitalCarpenter - Lite: control_task.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DigitalCarpenter - Lite
   &#160;<span id="projectnumber">Version 0.01</span>
   </div>
   <div id="projectbrief">A Nucleo L476RG based CNC Desktop CoreXY Laser Cutter &amp; Engraver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('control__task_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">control_task.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>File containing the header for a file containing the <code>control_task</code> function.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="libraries_6constants_8h_source.html">libraries&amp;constants.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for control_task.h:</div>
<div class="dyncontent">
<div class="center"><img src="control__task_8h__incl.png" border="0" usemap="#control__task_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div>
<p><a href="control__task_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ade29986ed4ef416962f22b46b1ffbb47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control__task_8h.html#ade29986ed4ef416962f22b46b1ffbb47">control_task</a> (void *p_params)</td></tr>
<tr class="memdesc:ade29986ed4ef416962f22b46b1ffbb47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task which recieves incoming commands, runs them through a control loop, and then sends them back out.  <a href="control__task_8h.html#ade29986ed4ef416962f22b46b1ffbb47">More...</a><br /></td></tr>
<tr class="separator:ade29986ed4ef416962f22b46b1ffbb47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File containing the header for a file containing the <code>control_task</code> function. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ade29986ed4ef416962f22b46b1ffbb47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade29986ed4ef416962f22b46b1ffbb47">&#9670;&nbsp;</a></span>control_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void control_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task which recieves incoming commands, runs them through a control loop, and then sends them back out. </p>
<p>This task receives input commands with desired values for the two motors, sent from <code>task_translate</code>, and input positions from each of the motor encoders from <code>encoder_A_task</code> and <code>encoder_B_task</code>. First, the desired positions and velocities are turned into ramp inputs for each motor by creating more points in between two consecutive points through linear interpolation. This allows the laser head to be have tighter control over velocity of the laser head. Each of the inputs of desired and measured positions and velocities are then sent through a PID control loop inside this task, which then outputs PWM signals that are sent via queues to <code>motor_A_driver_task</code> and <code>motor_B_driver_task</code> to control the motors.</p>
<p>The task has two main states, NORMAL_OPERATION and SAFETY_STOP. Under NORMAL_OPERATION, any incomming desired positions will be converted to ramps, controlled, and sent to the motors. SAFETY_STOP, if enabled, will immediately shut down the laser and keep it that way until the Safety_Supervisor task gives the go-ahead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>A pointer to function parameters which we don't use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="control__task_8h.html">control_task.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
