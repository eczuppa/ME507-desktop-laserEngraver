<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DigitalCarpenter - Lite: main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DigitalCarpenter - Lite
   &#160;<span id="projectnumber">Version 0.01</span>
   </div>
   <div id="projectbrief">A Nucleo L476RG based CNC desktop CoreXY Laser Engraver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="libraries_6constants_8h_source.html">libraries&amp;constants.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#main_8cpp" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa66421f3a1aa74a467c1e18ee07c489d"><td class="memItemLeft" align="right" valign="top"><a id="aa66421f3a1aa74a467c1e18ee07c489d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NIKO_TESTING</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aa66421f3a1aa74a467c1e18ee07c489d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2ead72fb97fabc3862b59e0874387225"><td class="memItemLeft" align="right" valign="top"><a id="a2ead72fb97fabc3862b59e0874387225"></a>
Queue&lt; char[LINE_BUFFER_SIZE]&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>chars_to_print</b> (WRITE_Q_SIZE,&quot;char array printer&quot;)</td></tr>
<tr class="separator:a2ead72fb97fabc3862b59e0874387225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada6d06cfd63dfaa3938b8b095c5added"><td class="memItemLeft" align="right" valign="top"><a id="ada6d06cfd63dfaa3938b8b095c5added"></a>
Queue&lt; char[LINE_BUFFER_SIZE]&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>read_chars</b> (READ_Q_SIZE,&quot;read_val&quot;)</td></tr>
<tr class="separator:ada6d06cfd63dfaa3938b8b095c5added"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a8421a49b6b32fab3a5a70119737cb3"><td class="memItemLeft" align="right" valign="top"><a id="a4a8421a49b6b32fab3a5a70119737cb3"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encoder_A_pos</b> (&quot;Encoder A Position&quot;)</td></tr>
<tr class="separator:a4a8421a49b6b32fab3a5a70119737cb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f80edf67880d13a3840fecaed25e6ec"><td class="memItemLeft" align="right" valign="top"><a id="a6f80edf67880d13a3840fecaed25e6ec"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encoder_A_velocity</b> (&quot;Encoder A Velocity&quot;)</td></tr>
<tr class="separator:a6f80edf67880d13a3840fecaed25e6ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94764df99ee19cd5e372fa85782a10ef"><td class="memItemLeft" align="right" valign="top"><a id="a94764df99ee19cd5e372fa85782a10ef"></a>
Share&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encoder_A_dt</b> (&quot;Encoder A delta t&quot;)</td></tr>
<tr class="separator:a94764df99ee19cd5e372fa85782a10ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31969971aa88094a591677c997747f53"><td class="memItemLeft" align="right" valign="top"><a id="a31969971aa88094a591677c997747f53"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encoder_B_pos</b> (&quot;Encoder B Position&quot;)</td></tr>
<tr class="separator:a31969971aa88094a591677c997747f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91753d1171813c23d7cdc5ad03fe11a"><td class="memItemLeft" align="right" valign="top"><a id="ad91753d1171813c23d7cdc5ad03fe11a"></a>
Share&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encoder_B_velocity</b> (&quot;Encoder B Velocity&quot;)</td></tr>
<tr class="separator:ad91753d1171813c23d7cdc5ad03fe11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a025332c696cdf9989df8df5cf5b65aab"><td class="memItemLeft" align="right" valign="top"><a id="a025332c696cdf9989df8df5cf5b65aab"></a>
Share&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encoder_B_dt</b> (&quot;Encoder B delta t&quot;)</td></tr>
<tr class="separator:a025332c696cdf9989df8df5cf5b65aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino's low-priority loop function, which we don't use.  <a href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f">More...</a><br /></td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the main file for running laser cutters using a RTOS. This file is currently in testing mode: Each person has there own section marked with #ifdef lines to write their own testing code without interfereing with others.</p>
<dl class="section author"><dt>Author</dt><dd>Niko Banks </dd>
<dd>
Matthew Carlson </dd>
<dd>
Ethan Czuppa</dd></dl>
<dl class="section date"><dt>Date</dt><dd>Nov 11 2020 File created </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino's low-priority loop function, which we don't use. </p>
<p>A non-RTOS Arduino program runs all of its continuously running code in this function after <code><a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d">setup()</a></code> has finished. When using FreeRTOS, <code><a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Arduino&#39;s low-priority loop function, which we don&#39;t use.">loop()</a></code> implements a low priority task on most microcontrollers, and crashes on some others, so we'll not use it. </p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>In order to achieve sub-millisecond task timing, the default value of configTick_RATE_HZ was changed to (SysClock)/10000 instead of (SysClock)/1000. This means every RTOS tick is 1/10th of a millisecond instead of 1 millisecond. This comes at the cost of reducing the time slice each task can be given before the CPU is overloaded by how fast the RTOS is trying to run. Use this version with a lower powered microcontroller at your own risk. This fork was created solely for this config change for a grbl-like (but not compatible ... yet) desktop laser cutter than uses a STM32 Nucleo L476RG. Also, delay quantities in vTaskDelay or vTaskDelayUntil can be updated to account for the change in TICK_RATE_HZ by using the pdMS_TO_TICKS() macro as follows: const TickType_t xBlockTime = pdMS_TO_TICKS( 100 ); vTaskDelay( xBlockTime ); from <a href="https://arduino.stackexchange.com/questions/25746/changing-the-tick-time-in-freertos">https://arduino.stackexchange.com/questions/25746/changing-the-tick-time-in-freertos</a> answered by FreeRTOS.org and rebatoma. This approach is significantly more convenient than going through and updating all the delay periods for each of your tasks. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
